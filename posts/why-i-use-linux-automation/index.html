<!DOCTYPE html><html> <head><meta charset="utf-8"><title>Why I use Linux: Automation | Hi, I'm Nhân</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/theme/css/font.css"><link rel="stylesheet" href="/theme/css/pygment.css"><link rel="stylesheet" href="/theme/css/main.css"><link rel="stylesheet" href="/theme/css/article.css"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@nhanbt"><meta property="og:title" content="Why I use Linux: Automation"><meta property="og:description" content="Repeating is for losers."><meta property="og:image" content="../../images/keyboard-warrior.jpg"></head> <!--

Why hello there, source viewer. Here's a dragon for no particular reason:

       ^                       ^
       |\   \        /        /|
      /  \  |\__  __/|       /  \_
     / /\ \ \ _ \/ _ /      /    \_
    / / /\ \ {*}\/{*}      /  / \ \_
    | | | \ \( (00) )     /  // |\ \_
    | | | |\ \(V""V)\    /  / | || \|
    | | | | \ |^--^| \  /  / || || ||
   / / /  | |( WWWW__ \/  /| || || ||
  | | | | | |  \______\  / / || || ||
  | | | / | | )|______\ ) | / | || ||
  / / /  / /  /______/   /| \ \ || ||
 / / /  / /  /\_____/  |/ /__\ \ \ \ \_
 | | | / /  /\______/    \   \__| \ \ \_
 | | | | | |\______ __    \_    \__|_| \_
 | | ,___ /\______ _  _     \_       \  |
 | |/    /\_____  /    \      \__     \ |    /\_
 |/ |   |\______ |      |        \___  \ |__/  \_
 v  |   |\______ |      |            \___/     |
    |   |\______ |      |                    __/
     \   \________\_    _\               ____/
   __/   /\_____ __/   /   )\_,      _____/
  /  ___/  \____/  ___/___)    \______/
  VVV  V        VVV  V

(ripped off from http://www.retrojunkie.com/asciiart/myth/dragons.htm)

--> <body> <div id="main"> <header> <h1 id="site-name"><a href="/">Hi, I'm Nhân</a></h1> <h2 id="site-subtitle">and this is my humble corner on the intertubes.</h2> </header> <nav> <ul class="navbar" id="left-navbar"> <li><a href="/">Blog</a></li> <li><a href="../../about/">About</a></li> <li><a href="../../projects/">Projects</a></li> </ul> <ul class="navbar" id="right-navbar"> <li><a href="https://cv.imnhan.com">CV</a></li> <li><a href="/feeds/atom.xml">Feed</a></li> </ul> <div class="clearfix"></div> </nav> <div id="content"> <div class="article-content"> <article> <h1 class="article-title"> Why I use Linux: Automation </h1> <time datetime="2013-06-07 08:02:00+07:00"> June 07, 2013 </time> <p>(In this post, when I say Linux, I mean any popular <span class="caps">GNU</span>/Linux distribution. Hope this clarification will keep the nitpickers&nbsp;away.)</p> <p>First let&rsquo;s discuss <em>why</em> automation&nbsp;rocks.</p> <h2 id="repetition-is-evil-and-boring">Repetition is evil (and boring)<a class="headerlink" href="#repetition-is-evil-and-boring" title="Permanent link">#</a></h2> <p>As a (would-be) software engineer, the <em>repetition is evil</em> notion has been planted in my head for far more times than anything else, and for good&nbsp;reasons.</p> <p>People are far more prone to error than computers, and doing repetitive tasks creates just too much room for that. Computers, on the other hand, do everything exactly how you tell them to do, with extreme speed and&nbsp;accuracy.</p> <p>Moreover, let&rsquo;s face it: We developers are all (or at least mostly) lazy. Not the &ldquo;I&rsquo;m don&rsquo;t wanna do anything&rdquo; kind of lazy, but more of the &ldquo;This crap is boring and not challenging at all, why the hell am I wasting time for it?&rdquo; type. We&rsquo;ve all got better things to do with our lives, like re-watching the last episode of <span class="caps">BBC</span>&rsquo;s <em>Sherlock</em> to look for clues to how he faked his death, or trying to figure out what that &ldquo;Han shot first&rdquo; meme means (sorry, I&rsquo;m from the later&nbsp;generation).</p> <h2 id="automation-needs-command-line-tools">Automation needs command line tools<a class="headerlink" href="#automation-needs-command-line-tools" title="Permanent link">#</a></h2> <p>Because, of course, <span class="caps">GUI</span> programs are (nearly) impossible to interact with in our scripts. Sure you can try mouse click emulation tools and stuff like that, but is it really worth the effort? And I&rsquo;d bet anything that those tools are far from reliable (<span class="caps">GUI</span> latency,&nbsp;anyone?).</p> <p>And this is where Windows falls short. Most (if not all) Windows tools are designed for <span class="caps">GUI</span>, and the whole Windows ecosystem is built around <span class="caps">GUI</span>&nbsp;use.</p> <p>It&rsquo;s a whole different matter in Linux: from the good old awk, sed, grep, wget to the new shiny aria2&hellip; Almost anything you can think of is available as a command line&nbsp;tool.</p> <h2 id="putting-them-all-together">Putting them all together<a class="headerlink" href="#putting-them-all-together" title="Permanent link">#</a></h2> <p>Just like any <span class="caps">UNIX</span>-like system, Linux tools utilize the One True Phylosophy: Do only 1 thing, and do it well. (okay, I&rsquo;m paraphrasing a bit, but you get the&nbsp;idea)</p> <p>The true power of command line tools is when they are used together. Let&rsquo;s take a look at a <a href="https://gist.github.com/nhanb/5726342">python script</a> I wrote last night to download the whole beginner course from <a href="http://www.justinguitar.com">justinguitar</a>.</p> <p>The real flow starts from line&nbsp;48:</p> <div class="highlight"><pre><span></span><code><span class="c1"># Fetch index pages which has links to all beginner lessons</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://www.justinguitar.com/en/BC-000-BeginnersCourse.php&#39;</span><span class="p">)</span>
<span class="n">start_page</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># Search for all links to lessons</span>
<span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;(BC-[0-9]</span><span class="si">{3}</span><span class="s1">-.+?)&quot;&#39;</span><span class="p">)</span>
<span class="n">pages</span> <span class="o">=</span> <span class="n">pat</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">start_page</span><span class="p">)</span>

<span class="c1"># Fetch html for each lesson</span>
<span class="n">pages_html</span> <span class="o">=</span> <span class="n">fetch_html</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span>

<span class="c1"># Crawl each lesson page, pull out lesson names and youtube link code</span>
<span class="n">youtube_codes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">html</span> <span class="ow">in</span> <span class="n">pages_html</span><span class="p">:</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">parse_info</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">code</span>
    <span class="k">if</span> <span class="n">code</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">youtube_codes</span><span class="p">:</span>
        <span class="n">youtube_codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</code></pre></div> <p>To summarize, this snippet goes to justinguitar&rsquo;s beginner course index page, grab all links to each lesson, then grab the lesson title as well as the youtube video code to its video. The result is the list name <code>youtube_codes</code>; each element is a tuple with the format <code>(title, youtube_code)</code>.</p> <p>Then I use a command line tool called <code>youtube-dl</code> to fetch the direct link to each video. The tool itself can download the video too, but it doesn&rsquo;t support multiple connections to accelerate the download. This is where <code>aria2c</code> jumps in: it takes the direct link from <code>youtube-dl</code> then download the whole&nbsp;thing:</p> <div class="highlight"><pre><span></span><code><span class="c1"># Leech the hell out of them</span>
<span class="k">for</span> <span class="n">lesson</span> <span class="ow">in</span> <span class="n">youtube_codes</span><span class="p">:</span>

    <span class="c1"># Ignore if lesson has no video</span>
    <span class="k">if</span> <span class="n">lesson</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">call</span><span class="p">([</span><span class="s1">&#39;touch&#39;</span><span class="p">,</span> <span class="n">lesson</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="k">continue</span>

    <span class="c1"># Use youtube-dl to get fresh download link and file extension</span>
    <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;youtube-dl &#39;</span> <span class="o">+</span> <span class="n">lesson</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span>\
            <span class="s1">&#39; --skip-download --get-url --get-filename -f 35/34/82/44/43/100&#39;</span>

    <span class="n">shell_output</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">check_output</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
    <span class="n">direct_link</span><span class="p">,</span> <span class="n">fname</span> <span class="o">=</span> <span class="n">shell_output</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="n">file_ext</span> <span class="o">=</span> <span class="n">fname</span><span class="p">[</span><span class="n">fname</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):]</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="n">lesson</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">file_ext</span>

    <span class="c1"># Then aria2 for serious multi-part download acceleration</span>
    <span class="nb">print</span> <span class="s1">&#39;Downloading &#39;</span> <span class="o">+</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s1">&#39;...&#39;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;aria2c&#39;</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;-x2&#39;</span><span class="p">,</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">direct_link</span><span class="p">]</span>
    <span class="n">shell_output</span> <span class="o">=</span> <span class="n">check_output</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">shell_output</span>
</code></pre></div> <p>That&rsquo;s it! I just needed to launch this script, turn off the laptop screen and go to bed. This morning I woke up seeing the whole course with almost 100 lessons downloaded. Imagine having to manually download all that by clicking each link&hellip; You don&rsquo;t wanna go there, do&nbsp;you?</p> <p>So that&rsquo;s just a very simple example of what automation helps your every day life. Of course its true power is unleashed when used in development; this is how one-click test and deployment works. Windows can do this too, but your choice of tool will be limited. And don&rsquo;t get me started on its lack of a decent package&nbsp;manager!</p> <p>To make a long story short, do yourself a favor and install a Linux&nbsp;distro.</p> <p>&hellip; or buy a&nbsp;Mac.</p> </article> </div> <h2 id="comments">Comments</h2> <div id="disqus_thread"> <button id="showCommentBtn">Show comments via Disqus</button> <noscript><br>(enable JavaScript first though)</noscript> </div> <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    // These need to be defined in the outermost scope, apparently.
    var disqus_shortname = 'nerdyweekly';
    var disqus_identifier = '/posts/why-i-use-linux-automation/';
    var disqus_url = '../../posts/why-i-use-linux-automation/';
    var disqus_title = 'Why I use Linux: Automation';

    document.querySelector('#showCommentBtn').addEventListener('click', function (event) {
        // Immediate visual feedback is always good:
        event.target.disabled = true;
        event.target.innerHTML = 'Loading comments...';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    });
</script> </div> <footer> &copy; 2013–2023 Bùi Thành Nhân <br> Built with &#9829; and probably too much <a target="_blank" rel="noopener" href="https://www.alambe.vn/products/ca-phe-rang-xay-alambe-sai-gon">cà phê sữa đá</a>. <p class="easter-egg" style="display: none; font-size: .7em; margin: 0; color: var(--bg-color);"> Bored? Try entering the Konami code from your keyboard. </p> <script>
        document.querySelector('.easter-egg').style.display = 'block';
      </script> </footer> </div> <script src="/theme/konami.js"></script> </body> </html>