<!DOCTYPE html><html> <head><meta charset="utf-8"><title>Enable italic text inside vim inside tmux inside gnome-terminal | Hi, I'm Nhân</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/theme/css/font.css"><link rel="stylesheet" href="/theme/css/pygment.css"><link rel="stylesheet" href="/theme/css/main.css"><link rel="stylesheet" href="/theme/css/article.css"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@nhanbt"><meta property="og:title" content="Enable italic text inside vim inside tmux inside gnome-terminal"><meta property="og:description" content="Update: As egmont pointed out in the comments: setting TERM=xterm inside tmux is discouraged and will cause wrong behavior in some programs. Changing all instances of xterm-256color to screen-256color in this tutorial should work, but I’m no longer..."><meta property="og:image" content="../../images/italic_01_gvim.png"></head> <!--

Why hello there, source viewer. Here's a dragon for no particular reason:

       ^                       ^
       |\   \        /        /|
      /  \  |\__  __/|       /  \_
     / /\ \ \ _ \/ _ /      /    \_
    / / /\ \ {*}\/{*}      /  / \ \_
    | | | \ \( (00) )     /  // |\ \_
    | | | |\ \(V""V)\    /  / | || \|
    | | | | \ |^--^| \  /  / || || ||
   / / /  | |( WWWW__ \/  /| || || ||
  | | | | | |  \______\  / / || || ||
  | | | / | | )|______\ ) | / | || ||
  / / /  / /  /______/   /| \ \ || ||
 / / /  / /  /\_____/  |/ /__\ \ \ \ \_
 | | | / /  /\______/    \   \__| \ \ \_
 | | | | | |\______ __    \_    \__|_| \_
 | | ,___ /\______ _  _     \_       \  |
 | |/    /\_____  /    \      \__     \ |    /\_
 |/ |   |\______ |      |        \___  \ |__/  \_
 v  |   |\______ |      |            \___/     |
    |   |\______ |      |                    __/
     \   \________\_    _\               ____/
   __/   /\_____ __/   /   )\_,      _____/
  /  ___/  \____/  ___/___)    \______/
  VVV  V        VVV  V

(ripped off from http://www.retrojunkie.com/asciiart/myth/dragons.htm)

--> <body> <div id="main"> <header> <h1 id="site-name"><a href="/">Hi, I'm Nhân</a></h1> <h2 id="site-subtitle">and this is my humble corner on the intertubes.</h2> </header> <nav> <ul class="navbar" id="left-navbar"> <li><a href="/">Blog</a></li> <li><a href="../../about/">About</a></li> <li><a href="../../projects/">Projects</a></li> </ul> <ul class="navbar" id="right-navbar"> <li><a href="https://cv.imnhan.com">CV</a></li> <li><a href="/feeds/atom.xml">Feed</a></li> </ul> <div class="clearfix"></div> </nav> <div id="content"> <div class="article-content"> <article> <h1 class="article-title"> Enable italic text inside vim inside tmux inside gnome-terminal </h1> <time datetime="2014-08-02 16:46:00+07:00"> August 02, 2014 </time> <p><strong>Update</strong>: As <code>egmont</code> pointed out in the comments: setting <code>TERM=xterm</code> inside tmux is discouraged and will cause wrong behavior in some programs. Changing all instances of <code>xterm-256color</code> to <code>screen-256color</code> in this tutorial should work, but I&rsquo;m no longer using gnome-terminal so I can&rsquo;t test that. I&rsquo;m now a <span class="caps">KDE</span> convert by the way; italic text Just Works<sup>tm</sup> with Konsole. Neat,&nbsp;eh?</p> <p>It has bothered me for a while what I can&rsquo;t get terminal vim to display <em>italic</em> text. It might seem trivial but it makes a world of difference when I&rsquo;m editing Markdown or <span class="caps">HTML</span>. Here&rsquo;s what gvim looks&nbsp;like:</p> <p><img alt src="/images/italic_01_gvim.png"></p> <p>Neat, right? This is what terminal vim&nbsp;shows:</p> <p><img alt src="/images/italic_02_vim.png"></p> <p>I don&rsquo;t know about you, but the second one looks catastrophically messy and counterintuitive to me. Let&rsquo;s change that. My current setup is terminal vim running inside a tmux session on gnome-terminal. Let&rsquo;s go through these&nbsp;things.</p> <h2 id="gnome-terminal">gnome-terminal<a class="headerlink" href="#gnome-terminal" title="Permanent link">#</a></h2> <p>Note that older versions of <code>gnome-terminal</code> do not support italic text. To check if your terminal does support it, run this&nbsp;command:</p> <div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\e[3m foo \e[23m&quot;</span>
</code></pre></div> <p>If your version of gnome-terminal supports it, an italic <em>foo</em> will appear. If not, upgrade it!&nbsp;:)</p> <h2 id="vim">vim<a class="headerlink" href="#vim" title="Permanent link">#</a></h2> <p>You may have noticed: <code>[3m</code> and <code>[23m</code> are the special sequences to start and stop printing italic text. Unfortunately, vim doesn&rsquo;t care about those. It expects <code>sitm</code> and <code>ritm</code> instead. We&rsquo;ll need to map them manually. Simply use these&nbsp;commands:</p> <div class="highlight"><pre><span></span><code><span class="c1"># Download a custom terminfo that defines sitm and ritm</span>
$<span class="w"> </span>wget<span class="w"> </span>https://gist.githubusercontent.com/sos4nt/3187620/raw/8e13c1fec5b72d415ed2917590348451de5f8e58/xterm-256color-italic.terminfo
<span class="c1"># Compile it</span>
$<span class="w"> </span>tic<span class="w"> </span>xterm-256color-italic.terminfo
<span class="c1"># Activate xterm-256color-italic.terminfo automatically</span>
<span class="c1"># (edit filename accordingly if you&#39;re using another shell)</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export TERM=xterm-256color-italic&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</code></pre></div> <p>Open a new terminal window and try the first command again. You should now see an italic <em>foo</em>. If not, I can&rsquo;t help you any further&nbsp;:P</p> <h2 id="tmux">tmux<a class="headerlink" href="#tmux" title="Permanent link">#</a></h2> <p>The only reason I use terminal vim instead of gvim is tmux integration, therefore I almost always run vim inside a tmux session. Unfortunately tmux does some weird things to your terminal, one of them is altering the <code>$TERM</code> environment variable. When we open a tmux session, it will typically reset <code>$TERM</code> to <code>screen-256color</code> or something like&nbsp;that.</p> <p>If you did the previous step, the <code>export</code> command in your <code>.bashrc</code> should have overridden tmux&rsquo;s <code>$TERM</code> value. If for some reason it doesn&rsquo;t work, you can directly tell tmux to use the correct value. Add this line to <code>~/.tmux.conf</code>:</p> <div class="highlight"><pre><span></span><code>set -g default-terminal &quot;xterm-256color-italic&quot;
</code></pre></div> <h2 id="more-on-vim">More on vim<a class="headerlink" href="#more-on-vim" title="Permanent link">#</a></h2> <p>If you still can&rsquo;t see any italic text in a markdown file, it might be because your colorscheme deliberately disables it. Try using another colorscheme (I highly recommend <a href="http://ethanschoonover.com/solarized">solarized</a>). You can also check if your markdown syntax plugin does use italics; I&rsquo;m currently using <a href="https://github.com/tpope/vim-markdown">Tim Pope&rsquo;s markdown plugin</a> and it works&nbsp;great!</p> <h2 id="references">References:<a class="headerlink" href="#references" title="Permanent link">#</a></h2> <ol> <li><a href="http://superuser.com/questions/204743/terminal-that-supports-ansi-italic-escape-code">Terminal that supports <span class="caps">ANSI</span> italic escape&nbsp;code?</a></li> <li><a href="http://stackoverflow.com/a/21077380">gnome-terminal&rsquo;s italic escape&nbsp;codes</a></li> <li><a href="https://alexpearce.me/2014/05/italics-in-iterm2-vim-tmux/">Enabling italic fonts in iTerm2, tmux, and&nbsp;vim</a></li> </ol> </article> </div> <h2 id="comments">Comments</h2> <div id="disqus_thread"> <button id="showCommentBtn">Show comments via Disqus</button> <noscript><br>(enable JavaScript first though)</noscript> </div> <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    // These need to be defined in the outermost scope, apparently.
    var disqus_shortname = 'nerdyweekly';
    var disqus_identifier = '/posts/enable-italic-text-vim-tmux-gnome-terminal/';
    var disqus_url = '../../posts/enable-italic-text-vim-tmux-gnome-terminal/';
    var disqus_title = 'Enable italic text inside vim inside tmux inside gnome-terminal';

    document.querySelector('#showCommentBtn').addEventListener('click', function (event) {
        // Immediate visual feedback is always good:
        event.target.disabled = true;
        event.target.innerHTML = 'Loading comments...';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    });
</script> </div> <footer> &copy; 2013–2023 Bùi Thành Nhân <br> Built with &#9829; and probably too much <a target="_blank" rel="noopener" href="https://www.alambe.vn/products/ca-phe-rang-xay-alambe-sai-gon">cà phê sữa đá</a>. <p class="easter-egg" style="display: none; font-size: .7em; margin: 0; color: var(--bg-color);"> Bored? Try entering the Konami code from your keyboard. </p> <script>
        document.querySelector('.easter-egg').style.display = 'block';
      </script> </footer> </div> <script src="/theme/konami.js"></script> </body> </html>